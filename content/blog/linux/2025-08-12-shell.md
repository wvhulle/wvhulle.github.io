+++
title = "Shell"
description = "Personal Linux command shell and prompt setup."
weight = 1
[taxonomies]
tags = ["Linux", "shell", "prompt", "Rust"]
+++


From most-useful to less-useful

## [Zoxide](https://github.com/ajeetdsouza/zoxide)

A fuzzy version of `cd`. A fuzzy search engine for folders in your filesystem. It learns where you want to go through usage. You can configure it to replace `cd`.

## [Delta](https://github.com/dandavison/delta)

A replacement for `diff` that adds syntax highlighting and paging. You can configure it as the default diff tool for Git.

## [Git difftool Meld](https://meldmerge.org/)

Not really a shell tool, but you can configure `meld` as the default difftool for Git. You can also add it as a `git` alias, you just have to write: `git meld [BRANCH]` to compare the current branch with another branch.

## [Nushell](https://www.nushell.sh/)

A shell that consciously avoids being POSIX compliant. This may look like a disadvantage, because you can't blindly copy-past Bash scripts from the internet anymore, but that is also the only disadvantage.

- Nu shell has an `rm` command that can be configured to delete files to the trash always.
- It also has an `ls` command that can be queried using a kind of SQL syntax with traditional pipes.

Want an audio notification when a long-running command finishes? In your `~/.config/nushell/config.nu`:

```bash
def notify-long-command [] {
  const NOTIFICATION_THRESHOLD = 30sec
  const SOUND_FILE = "/run/current-system/sw/share/sounds/freedesktop/stereo/bell.oga"

  # Skip notifications if explicitly disabled
  if ($env.DISABLE_COMMAND_NOTIFICATIONS? | default false) {
    return
  }

  let cmd_duration = (($env.CMD_DURATION_MS? | default "0") | into int | into duration -u ms)

  if $cmd_duration > $NOTIFICATION_THRESHOLD {
    try { ^pw-play $SOUND_FILE } catch { ^paplay $SOUND_FILE }
  }
}

$env.config = (
  $env.config | merge {
    hooks: {
      pre_prompt: [
        {||
          refresh-theme
          notify-long-command
        }
      ]
    }
  }
)
```

## [Helix](https://helix-editor.com/)

Terminal editor with powerful keybindings and language server support out of the box.

## [Atuin](https://atuin.sh/)

A search engine for your shell history that sync between devices. In a sense it is a replacement for the old `history` command.

Beware: By default it hijacks your upper arrow key to suggest commands from your history. However, you can make it narrow down to commands within the same Git repository or folder.

## [Oh-My-Posh](https://ohmyposh.dev/)

Extend your system prompt with extra information (about package version, git status). A prompt that shows me my Git branch and status is essential.

It's easy to use one of the themes.

## [Bat](https://github.com/sharkdp/bat)

A replacement for `cat` that adds paging (so you don't have to pipe it through `less`), syntax highlighting, and line numbers. Use it to override `cat`.

## [Direnv](https://direnv.net/)

Scaffold system environments by just entering and exiting directories. In combination with Nix or other declarative package managers, only the packages you need are available within your projects.

## [Zellij](https://zellij.dev/)

Easy terminal splitting. Detaching from views is possible to keep processes running in the background, you can re-attach later.

## [Claude-code](https://docs.anthropic.com/en/docs/claude-code)

For refactorings in human language. Good for matching local journal debug entries with online bug reports.

## [Ripgrep](https://github.com/BurntSushi/ripgrep)

Recursively search your current directory for a string or regex pattern, ignoring git-ignored and hidden files.

## [Github CLI](https://cli.github.com/)

Create PRs from the terminal. Check their status from the terminal. Has shortcut commands to open the corresponding Github web pages in your browser.  List CI action caches.

## [Carapace](https://carapace.sh/)

Aggregator for a useful set of shell-completers. Can even complete online GitHub repositories. Integrates with most shells.

In Nu-shell, you can combine zoxide completions with carapace using this in your `~/.config/nushell/config.nu`:

```bash
let external_completer = {|spans|
  match $spans.0 {
    z|zi => {
      $spans | skip 1 | zoxide query -l ...$in | lines | where {|x| $x != $env.PWD }
    }
    _ => {
      carapace $spans.0 nushell ...$spans | from json
    }
  }
}

$env.config = (
  $env.config | merge {
    completions: {
      external: {
        enable: true
        completer: $external_completer
      }
    }
  }
)
```

## [Broot](https://dystroy.org/broot/)

Pretty file-system trees.

## [NCDU](https://dev.yorhel.nl/ncdu)

Analyze which folders use the most disk space.

## [Powertop](https://01.org/powertop/)

See how many Watts your system is using and which processes are consuming the most power.

Use it to create custom "power profiles" with `power-profiles-daemon`.

## [Geekbench](https://www.geekbench.com/)

Compare your personal hardware / operating system with others using a standardised benchmark and upload scores.
