<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Willem Vanhulle â€“ Software Engineer</title>

    <!-- Inter Font for body and headers -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">

    <!-- Fira Code Font for code blocks -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap">

    <!-- Highlight.js Stylesheet (lighter theme) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/intellij-light.css">

    <!-- Highlight.js Stylesheet -->

    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <aside id="sidebar">
        <button id="home-button">
            Home
        </button>

        <ul id="post-list"></ul>

    </aside>

    <main>
        <section id="home">
            <img src="willem.jpg" alt="Willem Vanhulle">
            <h2>Willem Vanhulle</h2>
            <p><strong>Software Engineer</strong><br>Rust | TypeScript | Python</p>
            <nav>
                <a href="mailto:willemvanhulle@pm.me">Email</a> |
                <a href="https://github.com/wvhulle">GitHub</a> |
                <a href="/cv.pdf">CV</a>
            </nav>
            <p class="bio">
                I build robust, high-performance software for distributed systems, embedded robotics, and reactive user
                interfaces. Passionate mentor and systems programming advocate.
            </p>

            <p class="bio">
                Founder of <a href="https://sysghent.be">SysGhent</a>, a group for systems programmers around Ghent,
                Belgium.
            </p>
        </section>


        <article id="post-content" hidden></article>



    </main>



    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Blog Logic -->
    <script>
        const posts = [ "streams.md"];

        const postList = document.getElementById('post-list');
        const postContent = document.getElementById('post-content');
        const homeSection = document.getElementById('home');
        const homeButton = document.getElementById('home-button');

        async function loadPostList() {
            for (const post_md_file of posts) {
                const response = await fetch(`posts/${post_md_file}`);
                const text = await response.text();
                const [, frontMatter] = text.match(/---\n([\s\S]*?)\n---/) || [];
                const metadata = jsyaml.load(frontMatter);

                const li = document.createElement('li');
                li.innerHTML = `<a href="#" data-file="${post_md_file}">${metadata.title}</a>`;
                postList.appendChild(li);
            }
        }

        postList.addEventListener('click', async (e) => {
            e.preventDefault();
            if (e.target.tagName === 'A') {
                const response = await fetch(`posts/${e.target.dataset.file}`);
                const text = await response.text();
                const [, frontMatter, mdContent] = text.match(/---\n([\s\S]*?)\n---\n([\s\S]*)/) || [];
                const metadata = jsyaml.load(frontMatter);

                const date = metadata.date?.toLocaleDateString();

                postContent.innerHTML = `
                    <div class="post-header">
                        <h1>${metadata.title}</h1>
                        ${metadata.sub_title ? `<h3>${metadata.sub_title}</h3>` : ''}
                        <p class="meta">${metadata.author || 'Willem Vanhulle'}${date ? ' | ' + date : ''}</p>
                    </div>
                    <div class="post-body">
                    ${marked.parse(mdContent)}
                    </div>
                `;
                hljs.highlightAll();

                homeSection.hidden = true;
                postContent.hidden = false;
            }
        });

        homeButton.addEventListener('click', () => {
            postContent.hidden = true;
            homeSection.hidden = false;
        });

        loadPostList();
    </script>
</body>

</html>